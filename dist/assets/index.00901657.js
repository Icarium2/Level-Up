var s=Object.defineProperty,e=(e,t,a)=>(((e,t,a)=>{t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a})(e,"symbol"!=typeof t?t+"":t,a),a);import{P as t}from"./vendor.330e2cd3.js";class a extends t.Scene{constructor(){super({key:"titleScreen"})}preload(){this.load.image("titleScreen","/src/assets/images/title-screen.png"),this.load.image("controlsButton","/src/assets/images/controls-button.png"),this.load.image("controlsScreen","/src/assets/images/controls-screen.png"),this.load.image("startGame","/src/assets/images/start-game.png"),this.load.audio("introMusic","/src/assets/music/intro.wav")}create(){this.add.image(400,320,"titleScreen").setScale(.55);const s=this.sound.add("introMusic");s.autoplay=!0,s.play();let e=this.add.image(400,450,"controlsButton").setScale(1);e.setInteractive(),e.on("pointerup",(()=>{this.scene.start("controls")}));let t=this.add.image(400,510,"startGame").setScale(1);t.setInteractive(),t.on("pointerup",(()=>{this.scene.start("Game")}))}}class i extends t.Scene{constructor(){super({key:"controls"})}preload(){this.load.image("controls","/src/assets/images/controls-screen.png")}create(){const s=this.add.image(400,320,"controls").setScale(.55);s.setInteractive(),s.on("pointerup",(()=>{this.scene.start("titleScreen")}))}}class r extends t.Scene{constructor(){super({key:"Game"}),e(this,"takeDamage",(()=>{const s=Date.now();s>this.lastDamageTaken+2e3&&(this.lastDamageTaken=s,window.store.currentHP=window.store.currentHP-1)})),this.lastDamageTaken=0}preload(){this.load.audio("soundtrack","/src/assets/music/soundtrack.wav"),this.load.image("map_tiles","/src/assets/images/mainlevbuild.png"),this.load.image("torch","/src/assets/images/torch_1.png"),this.load.image("props","/src/assets/images/decorative.png"),this.load.tilemapTiledJSON("map","/src/assets/images/catacombs01.json"),this.load.path="/src/assets/sprite/",this.load.aseprite("sprite","sprite.png","sprite.json"),this.load.path="/src/assets/sprite/",this.load.aseprite("shuriken","shuriken.png","shuriken.json"),this.load.path="/src/assets/sprite/",this.load.aseprite("shuriken-rotated","shuriken-rotated.png","shuriken-rotated.json"),this.load.path="/src/assets/sprite/",this.load.aseprite("enemy","enemy.png","enemy.json")}create(){this.scene.run("game-ui"),this.cameras.main.setBounds(0,0,1600,1600),this.cameras.main.setZoom(2.5),this.cursors=this.input.keyboard.createCursorKeys(),this.spacebar=this.input.keyboard.addKey(t.Input.Keyboard.KeyCodes.SPACE),this.sound.get("introMusic").stop();const s=this.sound.add("soundtrack");s.autoplay=!0,s.loop=!0,s.play();const e=this.make.tilemap({key:"map"}),a=e.addTilesetImage("catacomb","map_tiles");e.addTilesetImage("decorative","props"),e.createLayer("objects",a),e.createLayer("floor",a);const i=e.createLayer("walls",a);i.setCollisionByProperty({collides:!0}),this.player=this.physics.add.sprite(500,150,"front");const r=this.physics.add.sprite(800,150,"enemy");this.anims.createFromAseprite("sprite"),this.player.play({key:"front"}),this.player.setCollideWorldBounds(!0),this.cameras.main.startFollow(this.player,!0,.05,.05),this.anims.createFromAseprite("enemy"),r.play("enemy-down",!0),this.anims.createFromAseprite("shuriken"),this.anims.createFromAseprite("shuriken-rotated"),this.weapon2=this.add.sprite(100,100,"shuriken-rotated"),this.weapon2.play("throw-down",!0),this.physics.add.collider(this.player,r,this.takeDamage),this.physics.add.collider(this.player,i)}update(){this.player.setVelocity(0),this.cursors.left.isDown?(this.player.play("left",!0),this.player.setVelocityX(-100)):this.cursors.right.isDown?(this.player.play("right",!0),this.player.setVelocityX(100)):this.cursors.up.isDown?(this.player.play("up",!0),this.player.setVelocityY(-100)):this.cursors.down.isDown&&(this.player.play("down",!0),this.player.setVelocityY(100)),this.spacebar.isDown&&this.cursors.left._justDown?(this.weapon=this.add.sprite(this.player.x-120,this.player.y,"shuriken"),this.weapon.play("throw-left",!0)):this.spacebar.isDown&&this.cursors.right._justDown?(this.weapon=this.add.sprite(this.player.x+120,this.player.y,"shuriken"),this.weapon.play("throw-right",!0)):this.spacebar.isDown&&this.cursors.up._justDown?(this.weapon=this.add.sprite(this.player.x,this.player.y-120,"shuriken-rotated"),this.weapon.play("throw-up",!0)):this.spacebar.isDown&&this.cursors.down._justDown&&(this.weapon=this.add.sprite(this.player.x,this.player.y+120,"shuriken-rotated"),this.weapon.play("throw-down",!0))}}class o extends t.Scene{constructor(){super({key:"game-ui"})}preload(){this.load.image("ui-heart-empty","/src/assets/images/ui_heart_empty.png"),this.load.image("ui-heart-full","/src/assets/images/ui_heart_full.png")}create(){this.hearts=this.add.group({classType:t.GameObjects.Image})}update(){this.hearts.createMultiple([{key:"ui-heart-empty",setXY:{x:10,y:10,stepX:16},scale:4,quantity:window.store.maxHP},{key:"ui-heart-full",setXY:{x:10,y:10,stepX:16},quantity:window.store.currentHP}])}}const n={type:t.AUTO,width:1600,height:1200,pixelArt:!0,physics:{default:"arcade",arcade:{debug:!0}},scale:{mode:t.Scale.FIT,autoCenter:t.Scale.CENTER_BOTH},scene:[a,i,r,o]};window.store={currentHP:3,maxHP:3},new t.Game(n);
