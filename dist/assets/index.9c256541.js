var e=Object.defineProperty,s=(s,t,a)=>(((s,t,a)=>{t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a})(s,"symbol"!=typeof t?t+"":t,a),a);import{P as t}from"./vendor.330e2cd3.js";class a extends t.Scene{constructor(){super({key:"titleScreen"})}preload(){this.load.image("titleScreen","./assets/images/title-screen.png"),this.load.image("controlsButton","./assets/images/controls-button.png"),this.load.image("controlsScreen","./assets/images/controls-screen.png"),this.load.image("startGame","./assets/images/start-game.png"),this.load.audio("introMusic","./assets/music/intro.wav")}create(){this.add.image(400,320,"titleScreen").setScale(.55);const e=this.sound.add("introMusic");e.autoplay=!0,e.play();let s=this.add.image(400,450,"controlsButton").setScale(1);s.setInteractive(),s.on("pointerup",(()=>{this.scene.start("controls")}));let t=this.add.image(400,510,"startGame").setScale(1);t.setInteractive(),t.on("pointerup",(()=>{this.scene.start("Game")}))}}class i extends t.Scene{constructor(){super({key:"controls"})}preload(){this.load.image("controls","./assets/images/controls-screen.png")}create(){const e=this.add.image(400,320,"controls").setScale(.55);e.setInteractive(),e.on("pointerup",(()=>{this.scene.start("titleScreen")}))}}class r extends t.Scene{constructor(){super({key:"Game"}),s(this,"takeDamage",(()=>{const e=Date.now();e>this.lastDamageTaken+2e3&&(this.lastDamageTaken=e,window.store.currentHP=window.store.currentHP-1),window.store.currentHP<1&&this.scene.start("gameOver")})),this.lastDamageTaken=0}preload(){let e;this.load.audio("soundtrack","./assets/music/soundtrack.wav"),this.load.image("map_tiles","./assets/images/mainlevbuild.png"),this.load.image("props","./assets/images/decorative.png"),this.load.tilemapTiledJSON("map","./assets/images/catacombs01.json"),this.load.path="./assets/sprite/",this.load.aseprite("sprite","sprite.png","sprite.json"),this.load.path="./assets/sprite/",this.load.aseprite("shuriken","shuriken.png","shuriken.json"),this.load.path="./assets/sprite/",this.load.aseprite("shuriken-rotated","shuriken-rotated.png","shuriken-rotated.json"),this.load.path="./assets/sprite/",this.load.aseprite("enemy","enemy.png","enemy.json"),e="https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/dist/rexpathfollowerplugin.min.js",this.load.plugin("rexpathfollowerplugin","https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/dist/rexpathfollowerplugin.min.js",!0)}create(){this.scene.run("game-ui"),this.cameras.main.setBounds(0,0,1600,1600),this.cameras.main.setZoom(2.5),this.cursors=this.input.keyboard.createCursorKeys(),this.spacebar=this.input.keyboard.addKey(t.Input.Keyboard.KeyCodes.SPACE),this.sound.get("introMusic").stop();const e=this.sound.add("soundtrack");e.autoplay=!0,e.loop=!0,e.play();const s=this.make.tilemap({key:"map"}),a=s.addTilesetImage("catacomb","map_tiles"),i=s.addTilesetImage("decorative","props");s.createLayer("floor",a),s.createLayer("props",i),s.createLayer("objects",a);const r=s.createLayer("walls",a);r.setCollisionByProperty({collides:!0}),this.player=this.physics.add.sprite(240,380,"front"),this.anims.createFromAseprite("sprite"),this.player.play({key:"front"}),this.player.setCollideWorldBounds(!0),this.cameras.main.startFollow(this.player,!0,.05,.05),this.player.setScale(.6),this.anims.createFromAseprite("enemy");const o=this.add.path(70,500).lineTo(300,500),n=this.add.graphics({});o.draw(n);const l=this.physics.add.sprite(0,0,"enemy");l.pathFollower=this.plugins.get("rexpathfollowerplugin").add(l,{path:o,t:0}),this.tweens.add({targets:l.pathFollower,t:1,ease:"Linear",duration:4e3,repeat:-1,yoyo:!0}),this.anims.createFromAseprite("shuriken"),this.anims.createFromAseprite("shuriken-rotated"),this.physics.add.collider(this.player,l,this.takeDamage),this.physics.add.collider(this.player,r)}update(){this.player.setVelocity(0),this.cursors.left.isDown?(this.player.play("left",!0),this.player.setVelocityX(-100)):this.cursors.right.isDown?(this.player.play("right",!0),this.player.setVelocityX(100)):this.cursors.up.isDown?(this.player.play("up",!0),this.player.setVelocityY(-100)):this.cursors.down.isDown&&(this.player.play("down",!0),this.player.setVelocityY(100)),this.spacebar.isDown&&this.cursors.left._justDown?(this.weapon=this.add.sprite(this.player.x-120,this.player.y,"shuriken"),this.weapon.play("throw-left",!0)):this.spacebar.isDown&&this.cursors.right._justDown?(this.weapon=this.add.sprite(this.player.x+120,this.player.y,"shuriken"),this.weapon.play("throw-right",!0)):this.spacebar.isDown&&this.cursors.up._justDown?(this.weapon=this.add.sprite(this.player.x,this.player.y-120,"shuriken-rotated"),this.weapon.play("throw-up",!0)):this.spacebar.isDown&&this.cursors.down._justDown&&(this.weapon=this.add.sprite(this.player.x,this.player.y+120,"shuriken-rotated"),this.weapon.play("throw-down",!0))}}class o extends t.Scene{constructor(){super({key:"game-ui"})}preload(){this.load.image("ui-heart-empty","./assets/images/ui_heart_empty.png"),this.load.image("ui-heart-full","./assets/images/ui_heart_full.png")}create(){this.hearts=this.add.group({classType:t.GameObjects.Image})}update(){this.hearts.createMultiple([{key:"ui-heart-empty",setXY:{x:10,y:10,stepX:16},scale:4,quantity:window.store.maxHP},{key:"ui-heart-full",setXY:{x:10,y:10,stepX:16},quantity:window.store.currentHP}])}}class n extends t.Scene{constructor(){super({key:"gameOver"})}preload(){this.load.image("gameOverScreen","./assets/images/gameover-screen.png")}create(){this.add.image(400,320,"gameOverScreen").setScale(.55),window.addEventListener("keypress",(e=>{"Enter"==e.code&&this.scene.start("Game")}),{once:!0})}}const l={type:t.AUTO,width:1600,height:1200,pixelArt:!0,physics:{default:"arcade",arcade:{debug:!0}},scale:{mode:t.Scale.FIT,autoCenter:t.Scale.CENTER_BOTH},scene:[a,i,r,o,n]};window.store={currentHP:3,maxHP:3},new t.Game(l);
